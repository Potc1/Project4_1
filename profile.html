<html lang="ru">
    <head>
        <link rel="stylesheet" href="style.css">
        <script src="https://cdn.plot.ly/plotly-3.0.1.min.js"></script>
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    </head>
    <body>
      <header>
        <nav class = "navbar compact-navbar">
          <div class = "navbar-menu">
            <div>
                <button onclick="window.location.href='index.html'" class="main-btn">–ì–ª–∞–≤–Ω–∞—è</button>
            </div>
            <div>
                <button onclick="window.location.href='catalog.html'" class="main-btn">–†—ã–Ω–æ–∫</button>
            </div>
          </div>
        </nav>
      </header>
      <div class="header-line"></div>

        <div id="profile">
            <div id="cost">
                <p id="costText">–°—Ç–æ–∏–º–æ—Å—Ç—å:</p>
                <p id="costValue"></p>
            </div>
            <div id="income_value">
                <p id="income_valueText">–ü—Ä–∏–±—ã–ª—å ‚ÇΩ:</p>
                <p id="income_valueValue"></p>
            </div>
            <div id="income_percent">
                <p id="income_percentText">–ü—Ä–∏–±—ã–ª—å %:</p>
                <p id="income_percentValue">100</p>
            </div>   
        </div>
        <div id="container">
            <div class = "header">
              <div class="header-content">
                  <a data-toggle="collapse" href="#collapseStonks"><span class="header-title">–ê–∫—Ü–∏–∏</span></a>
                  <div class="header-line"></div>
              </div>
            </div>
            <div id="sharesContent"></div>  
            <div class = "header">
              <div class="header-content">
                <a data-toggle="collapse" href="#collapseBonds"><span class="header-title">–û–±–ª–∏–≥–∞—Ü–∏–∏</span></a> 
                <div class="header-line"></div>
              </div>
            </div>
            <div id="bondsContent"></div>
          </div>
          <div class="modal fade" id="commonModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="false">
            <div class="modal-dialog modal-dialog-centered" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title"></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body"></div>
                <div class="alert-area mr-3 ml-3"></div>
                <div class="modal-footer"></div>
              </div>
            </div>
          </div>  
    </body>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.5/handlebars.min.js"></script>
    <script src="profile.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script type="module">
                    // 1Ô∏è‚É£ –ò–º–ø–æ—Ä—Ç Firebase SDK
            import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
            import { getDatabase, ref, onValue, set, push } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

            // 2Ô∏è‚É£ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Firebase (–∑–∞–º–µ–Ω–∏ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏)
    const firebaseConfig = {
      apiKey: "AIzaSyAi77EjCTf-jxeJ6MjKv9hG9-hB8Zw8jNE",
      authDomain: "imoex2.firebaseapp.com",
      databaseURL: "https://imoex2-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "imoex2",
      storageBucket: "imoex2.firebasestorage.app",
      messagingSenderId: "334419845868",
      appId: "1:334419845868:web:155f088633782940563bc9"
    };
            let tg = window.Telegram.WebApp;
            // 3Ô∏è‚É£ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Firebase
            const app = initializeApp(firebaseConfig);
            const database = getDatabase(app);
            ///const newUserRef = push(ref(database, "users"));

            // 4Ô∏è‚É£ –°–ª—É—à–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
            const dataRef = ref(database, "/");
            onValue(dataRef, (snapshot) => {
            var data = snapshot.val();
            //console.log("üî• –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:", data);
            SetProfile(data, tg.initDataUnsafe.user.id);
            //SetProfile(data, 'user')
            });
    </script>
</html>

 
